{% extends 'Admin_Base.html' %} 
{% load static %} {% block admin_bodyblock %}
<!--begin::Main-->
<div class="app-main flex-column flex-row-fluid" id="kt_app_main">
	<!--begin::Content wrapper-->
	<div class="d-flex flex-column flex-column-fluid">
		<!--begin::Toolbar-->
		<div id="kt_app_toolbar" class="app-toolbar py-3 py-lg-6">
			<!--begin::Toolbar container-->
			<div id="kt_app_toolbar_container" class="app-container container-xxl d-flex flex-stack">
				<!--begin::Page title-->
				<div class="page-title d-flex flex-column justify-content-center flex-wrap me-3">
					<!--begin::Title-->
					<h1 class="page-heading d-flex text-dark fw-bold fs-3 flex-column justify-content-center my-0">Money Management Details Form</h1>
					<!--end::Title-->
					<!--begin::Breadcrumb-->
					<ul class="breadcrumb breadcrumb-separatorless fw-semibold fs-7 my-0 pt-1">
						<!--begin::Item-->
						<li class="breadcrumb-item text-muted">
							<a href="../../demo1/dist/index.html" class="text-muted text-hover-primary">Admin Side</a>
						</li>
						<!--end::Item-->
						<!--begin::Item-->
						<li class="breadcrumb-item">
							<span class="bullet bg-gray-400 w-5px h-2px"></span>
						</li>
						<!--end::Item-->
						<!--begin::Item-->
						<li class="breadcrumb-item text-muted">Pacific Homes</li>
						<!--end::Item-->
						<!--begin::Item-->
						<li class="breadcrumb-item">
							<span class="bullet bg-gray-400 w-5px h-2px"></span>
						</li>
						<!--end::Item-->
						<!--begin::Item-->
						<li class="breadcrumb-item text-muted">Add Money Management Details</li>
						<!--end::Item-->
					</ul>
					<!--end::Breadcrumb-->
				</div>
				<!--end::Page title-->
				
			</div>
			<!--end::Toolbar container-->
		</div>
		<!--end::Toolbar-->
		<!--begin::Content-->
		<div id="kt_app_content" class="app-content flex-column-fluid">
			{% for message in messages %}
            <div class="alert {{ message.tags }} alert-dismissible" role="alert">
                <strong>Message:</strong> {{ message }}
            </div>
            {% endfor %}
			<!--begin::Content container-->
			<div id="kt_app_content_container" class="app-container container-xxl">
				<!--begin::Form-->
				<form id="myMoneyManagementForm" action="{% url "moneyManagementAddPage" %}" enctype="multipart/form-data" method="post" data-parsley-validate
				novalidate  class="form d-flex flex-column flex-lg-row" >{% csrf_token %}
				
				<div class="d-flex flex-column gap-7 gap-lg-10 w-100 w-lg-300px mb-7 me-lg-10">
					<!--begin::Slider settings-->
					<div class="card card-flush py-4">
						<!--begin::Card header-->
						<div class="card-header">
							<!--begin::Card title-->
							<div class="card-title">
								<h2>Transation Image </h2>
							</div>
							<!--end::Card title-->
						</div>
						<!--end::Card header-->
						<!--begin::Card body-->
						<div class="card-body text-center pt-0">
							<!--begin::Image input-->
							<!--begin::Image input placeholder-->
							<style>.image-input-placeholder { background-image: url('../static/media/svg/files/blank-image.svg'); } [data-bs-theme="dark"] .image-input-placeholder { background-image: url('../static/media/svg/files/blank-image-dark.svg'); }</style>
							<!--end::Image input placeholder-->
							<div class="image-input image-input-empty image-input-outline image-input-placeholder mb-3" data-kt-image-input="true">
								<!--begin::Preview existing avatar-->
								<div class="image-input-wrapper w-150px h-150px"></div>
								<!--end::Preview existing avatar-->
								<!--begin::Label-->
								<label class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow" data-kt-image-input-action="change" data-bs-toggle="tooltip" title="Add Image">
									<i class="bi bi-pencil-fill fs-7"></i>
									<!--begin::Inputs-->
									<input type="file" name="moneyManagementTransitionProof" accept=".png, .jpg, .jpeg" />
									<input type="hidden" name="avatar_remove" />
									<!--end::Inputs-->
								</label>
								<!--end::Label-->
								<!--begin::Cancel-->
								<span class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow" data-kt-image-input-action="cancel" data-bs-toggle="tooltip" title="Cancel Image">
									<i class="bi bi-x fs-2"></i>
								</span>
								<!--end::Cancel-->
								<!--begin::Remove-->
								<span class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow" data-kt-image-input-action="remove" data-bs-toggle="tooltip" title="Remove Image">
									<i class="bi bi-x fs-2"></i>
								</span>
								<!--end::Remove-->
							</div>
							<!--end::Image input-->
							<!--begin::Description-->
							<div class="text-muted fs-7">Set the Transation image. Only *.png, *.jpg and *.jpeg image files are accepted</div>
							<!--end::Description-->
						</div>
						<!--end::Card body-->
					</div>
					
					<div class="card card-flush py-4">
						<!--begin::Card header-->
							<div class="card-header">
								<!--begin::Card title-->
								<div class="card-title">
									<h2> Cheque Image </h2>
								</div>
								<!--end::Card title-->
							</div>
							<!--end::Card header-->
							<!--begin::Card body-->
							<div class="card-body text-center pt-0">
								<!--begin::Image input-->
								<!--begin::Image input placeholder-->
								<style>.image-input-placeholder { background-image: url('../static/media/svg/files/blank-image.svg'); } [data-bs-theme="dark"] .image-input-placeholder { background-image: url('../static/media/svg/files/blank-image-dark.svg'); }</style>
								<!--end::Image input placeholder-->
								<div class="image-input image-input-empty image-input-outline image-input-placeholder mb-3" data-kt-image-input="true">
									<!--begin::Preview existing avatar-->
									<div class="image-input-wrapper w-150px h-150px"></div>
									<!--end::Preview existing avatar-->
									<!--begin::Label-->
									<label class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow" data-kt-image-input-action="change" data-bs-toggle="tooltip" title="Add Image">
										<i class="bi bi-pencil-fill fs-7"></i>
										<!--begin::Inputs-->
										<input type="file" name="moneyManagementChequePhoto" accept=".png, .jpg, .jpeg" />
										<input type="hidden" name="avatar_remove" />
										<!--end::Inputs-->
									</label>
									<!--end::Label-->
									<!--begin::Cancel-->
									<span class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow" data-kt-image-input-action="cancel" data-bs-toggle="tooltip" title="Cancel Image">
										<i class="bi bi-x fs-2"></i>
									</span>
									<!--end::Cancel-->
									<!--begin::Remove-->
									<span class="btn btn-icon btn-circle btn-active-color-primary w-25px h-25px bg-body shadow" data-kt-image-input-action="remove" data-bs-toggle="tooltip" title="Remove Image">
										<i class="bi bi-x fs-2"></i>
									</span>
									<!--end::Remove-->
								</div>
								<!--end::Image input-->
								<!--begin::Description-->
								<div class="text-muted fs-7">Set the Cheque image. Only *.png, *.jpg and *.jpeg image files are accepted</div>
								<!--end::Description-->
							</div>
							<!--end::Card body-->
					</div>
					<!--end::Slider settings-->
				</div>
				<!--end::Aside column-->	
					
					<!--begin::Main column-->
					<div class="d-flex flex-column flex-row-fluid gap-7 gap-lg-10">
						<!--begin::Tab content-->
						<div class="tab-content">
							<!--begin::Tab pane-->
							<div class="tab-pane fade show active" id="kt_ecommerce_add_product_general" role="tab-panel">
								<div class="d-flex flex-column gap-7 gap-lg-10">
									<!--begin::Add Money Management Details options-->
									<div class="card card-flush py-4">
										<!--begin::Card header-->
										<div class="card-header">
											<div class="card-title">
												<h2>Add Money Management Details Information</h2>
											</div>
										</div>
										<!--end::Card header-->
										<!--begin::Card body-->
										<div class="card-body pt-0">
											<!--begin::Input group-->
											<div class="mb-10 fv-row">
												<!--begin::Label-->
												<label for="moneyManagementBangalowNo" class="required form-label">Bangalow No.</label>
												<!--end::Label-->
												<select class="form-select mb-2 moneyManagementBangalowNo" name="moneyManagementBangalowNo" id="moneyManagementBangalowNo"
                                                    data-control="select2" data-hide-search="">
                                                    <option value="select">Select Bangalow No.</option>
                                                    {% for clientbanglows in client_view %}
                                                    <option value="{{ clientbanglows.client_id }}">
                                                        {{ clientbanglows.client_bangalow_no }}
                                                    </option>
                                                    {% endfor %}
                                                </select>
												<!--end::Input-->
											</div>
											<!--end::Input group-->
											
											<!--begin::Input group-->
											<div class="mb-10 fv-row">
												<!--begin::Label-->
												<label for="moneyManagementPhoneNo" class="required form-label">Client Phone No.</label>
												<!--end::Label-->
												<!--begin::Input-->
												<input type="text" id="moneyManagementPhoneNo" name="moneyManagementPhoneNo" class="form-control mb-2" placeholder="Client Phone No." value="" />
												<!--end::Input-->
												<!--begin::Description-->
												<div class="text-muted fs-7">A Client Phone No. is required.</div>
												<!--end::Description-->
											</div>
											<!--end::Input group-->
											<!--begin::Input group-->
											<div class="mb-10 fv-row">
												<!--begin::Label-->
												<label for="moneyManagementTotalAmount" class="required form-label">Total Amount</label>
												<!--end::Label-->
												<!--begin::Input-->
												<input type="text" id="moneyManagementTotalAmount" name="moneyManagementTotalAmount" class="form-control mb-2" placeholder="Total Amount" value="" />
												<!--end::Input-->
												<!--begin::Description-->
												<div class="text-muted fs-7">A Total Amount is required.</div>
												<!--end::Description-->
											</div>
											<!--end::Input group-->
											<!--begin::Input group-->
											<div class="mb-10 fv-row">
												<!--begin::Label-->
												<label for="moneyManagementTokenAmount" class="required form-label">Token Amount</label>
												<!--end::Label-->
												<!--begin::Input-->
												<input type="text" id="moneyManagementTokenAmount" name="moneyManagementTokenAmount" class="form-control mb-2" placeholder="Token Amount" value="" />
												<!--end::Input-->
												<!--begin::Description-->
												<div class="text-muted fs-7">A Token Amount is required.</div>
												<!--end::Description-->
											</div>
											<!--end::Input group-->
											<!--begin::Input group-->
											<div class="mb-10 fv-row">
												<!--begin::Label-->
												<label for="moneyManagementTotalRemainingAmount" class="required form-label">Total Remaining Amount</label>
												<!--end::Label-->
												<!--begin::Input-->
												<input type="text" id="moneyManagementTotalRemainingAmount" name="moneyManagementTotalRemainingAmount" oninput="calculateRemainingPrice()" class="form-control mb-2" placeholder="Total Remaining Amount" value="" />
												<!--end::Input-->
												<!--begin::Description-->
												<div class="text-muted fs-7">A Total Remaining Amount is required.</div>
												<!--end::Description-->
											</div>
											<!--end::Input group-->
											<!--begin::Input group-->
											<div class="mb-10 fv-row">
												<!--begin::Label-->
												<label for="moneyManagementAmountMode" class="required form-label">Payment Mode</label>
												<!--end::Label-->
												<!--begin::Input-->
												<select class="form-select mb-2" name="moneyManagementAmountMode" id="moneyManagementAmountMode" data-control="select2" data-hide-search="true" data-placeholder="Select A Payment Mode">
													<option></option>
													<option value="Installment">Installment</option>
													<option value="loan">Loan</option>
												</select>
												<!--end::Input-->
												<!--begin::Description-->
												<div class="text-muted fs-7">Select The Payment Mode. </div>
												<!--end::Description-->
											</div>
											<!--end::Input group-->
											<!--begin::Input group-->
											<div class="mb-10 fv-row">
												<!--begin::Label-->
												<label for="moneyManagementTransition" class="required form-label">Amount Transation</label>
												<!--end::Label-->
												<!--begin::Input-->
												<select class="form-select mb-2" name="moneyManagementTransition" id="moneyManagementTransition" data-control="select2" data-hide-search="true" data-placeholder="Select An Amount Transation">
													<option></option>
													<option value="cash">Cash</option>
													<option value="cheque">Cheque</option>
													<option value="RTGS">RTGS</option>
												</select>
												<!--end::Input-->
												<!--begin::Description-->
												<div class="text-muted fs-7">Select The Amount Transation. </div>
												<!--end::Description-->
											</div>
											<!--end::Input group-->
											<!--begin::Input group-->
											<div class="mb-10 fv-row">
												<!--begin::Label-->
												<label for="moneyManagementInstallmentAmount" class="required form-label">Installment Amount</label>
												<!--end::Label-->
												<!--begin::Input-->
												<input type="text" id="moneyManagementInstallmentAmount" name="moneyManagementInstallmentAmount" oninput="calculateRemainingPrice()" class="form-control mb-2" placeholder="Installment Amount" value="" />
												<!--end::Input-->
												<!--begin::Description-->
												<div class="text-muted fs-7">A Installment Amount is required </div>
												<!--end::Description-->
											</div>
											<!--end::Input group-->
											<!--begin::Input group-->
											<div class="mb-10 fv-row">
												<!--begin::Label-->
												<label for="moneyManagementRemainingPayment" class="required form-label">Remaining Payment</label>
												<!--end::Label-->
												<!--begin::Input-->
												<input type="text" id="moneyManagementRemainingPayment" name="moneyManagementRemainingPayment" class="form-control mb-2" placeholder="Remaining Payment" value="" />
												<!--end::Input-->
												<!--begin::Description-->
												<div class="text-muted fs-7">A Remaining Payment is required </div>
												<!--end::Description-->
											</div>
											<!--end::Input group-->
											<!--begin::Input group-->
											<div class="mb-10 fv-row">
												<!--begin::Label-->
												<label for="moneyManagementDate" class="required form-label">Date</label>
												<!--end::Label-->
												<!--begin::Input-->
												<input type="text" id="moneyManagementDate" name="moneyManagementDate" class="form-control mb-2" placeholder="31-12-2023" value="" />
												<!--end::Input-->
												<!--begin::Description-->
												<div class="text-muted fs-7">A DD-MM-YYYY Format Date is required </div>
												<!--end::Description-->
											</div>
											<!--end::Input group-->
											<!--begin::Input group-->
											<div class="mb-10 fv-row">
												<!--begin::Label-->
												<label for="moneyManagementBankName" class="required form-label">Bank Name</label>
												<!--end::Label-->
												<!--begin::Input-->
												<input type="text" id="moneyManagementBankName" name="moneyManagementBankName" class="form-control mb-2" placeholder="Bank Name" value="" />
												<!--end::Input-->
												<!--begin::Description-->
												<div class="text-muted fs-7">A Bank Name is required </div>
												<!--end::Description-->
											</div>
											<!--end::Input group-->
											<!--begin::Input group-->
											<div class="mb-10 fv-row">
												<!--begin::Label-->
												<label for="moneyManagementBankBranch" class="required form-label">Bank Branch</label>
												<!--end::Label-->
												<!--begin::Input-->
												<input type="text" id="moneyManagementBankBranch" name="moneyManagementBankBranch" class="form-control mb-2" placeholder="Bank Branch" value="" />
												<!--end::Input-->
												<!--begin::Description-->
												<div class="text-muted fs-7">A Bank Branch is required </div>
												<!--end::Description-->
											</div>
											<!--end::Input group-->
											<!--begin::Input group-->
											<div class="mb-10 fv-row">
												<!--begin::Label-->
												<label for="moneyManagementIFSENo" class="required form-label">IFSE No</label>
												<!--end::Label-->
												<!--begin::Input-->
												<input type="text" id="moneyManagementIFSENo" name="moneyManagementIFSENo" class="form-control mb-2" placeholder="IFSE No" value="" />
												<!--end::Input-->
												<!--begin::Description-->
												<div class="text-muted fs-7">A IFSE No is required </div>
												<!--end::Description-->
											</div>
											<!--end::Input group-->
											<!--begin::Input group-->
											<div class="mb-10 fv-row">
												<!--begin::Label-->
												<label for="moneyManagementChequeNo" class="required form-label">Cheque No</label>
												<!--end::Label-->
												<!--begin::Input-->
												<input type="text" id="moneyManagementChequeNo" name="moneyManagementChequeNo" class="form-control mb-2" placeholder="Cheque No" value="" />
												<!--end::Input-->
												<!--begin::Description-->
												<div class="text-muted fs-7">A Cheque No is required </div>
												<!--end::Description-->
											</div>
											<!--end::Input group-->
											<!--begin::Input group-->
											<div class="mb-10 fv-row">
												<!--begin::Label-->
												<label for="moneyManagementAccountNo" class="required form-label">Cheque A/C No</label>
												<!--end::Label-->
												<!--begin::Input-->
												<input type="text" id="moneyManagementAccountNo" name="moneyManagementAccountNo" class="form-control mb-2" placeholder="Cheque A/C No" value="" />
												<!--end::Input-->
												<!--begin::Description-->
												<div class="text-muted fs-7">A Cheque A/C No is required </div>
												<!--end::Description-->
											</div>
											<!--end::Input group-->
											
											<!--begin::Input group-->
											<div class="row mb-0">
												<!--begin::Label-->
												<label
													class="col-lg-4 col-form-label fw-semibold fs-6">Active
													or Disactive
												</label>
												<!--begin::Label-->
												<!--begin::Label-->
												<div class="col-lg-8 d-flex align-items-center">
													<div
														class="form-check form-check-solid form-switch form-check-custom fv-row">
														<input class="form-check-input w-45px h-30px"
															type="checkbox" id="moneyManagementdisable"  name="moneyManagementdisable"
															checked="checked" />
														<label class="form-check-label"
															for="moneyManagementdisable"></label>
													</div>
												</div>
												<!--begin::Label-->
											</div>
											<!--end::Input group-->
										</div>
										<!--end::Card header-->
									</div>
									<!--end::Contact Us options-->
									
									<table id="moneyManagementTable" class="table table-striped table-bordered">
										<thead>
											<tr>
												<th>Amount Mode</th>
												<th>Total Amount</th>
												<th>Installment Amount</th>
												<th>Transation Type</th>
												<th>Remaining Payment</th>
												<th>Date</th>
											</tr>
										</thead>
										<tbody id="moneyManagementTableBody" >
											<!-- Table rows will be dynamically added here -->
										</tbody>
									</table>
									
								</div>
							</div>
							<!--end::Tab pane-->
						</div>
						<!--end::Tab content-->
						
						<div class="d-flex justify-content-end">
							<!--begin::Button-->
							<a href="../../demo1/dist/apps/ecommerce/catalog/products.html" id="kt_ecommerce_add_product_cancel" class="btn btn-light me-5">Cancel</a>
							<!--end::Button-->
							<!--begin::Button-->
							<button type="submit" id="kt_ecommerce_add_product_submit" class="btn btn-primary">
								<span class="indicator-label">Save Changes</span>
								<span class="indicator-progress">Please wait...
								<span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>
							</button>
							<!--end::Button-->
						</div>
					</div>
					<!--end::Main column-->
				</form>
				<!--end::Form-->
			</div>
			<!--end::Content container-->
		</div>
		<!--end::Content-->
	</div>
	<!--end::Content wrapper-->
</div>
<!--end:::Main-->
<script>
	const editableDiv = document.getElementById('kt_ecommerce_add_product_description');
	const hiddenInput = document.getElementById('input-hidden'); // A hidden input field to store the content
	editableDiv.addEventListener('input', function () {
		hiddenInput.value = editableDiv.innerText;
	});
</script>
{% comment %} <script>
	function calculateRemainingPrice() {
		// Get values from input fields
		var totalPrice = parseFloat(document.getElementById('moneyManagementTotalRemainingAmount').value) || 0;
		var InstallmentPrice = parseFloat(document.getElementById('moneyManagementInstallmentAmount').value) || 0;
		// Calculate remaining price
		var remainingPrice = totalPrice - InstallmentPrice;
		// Update the remainingPrice field
		document.getElementById('moneyManagementRemainingPayment').value = remainingPrice.toFixed();
	}
	
</script> {% endcomment %}

{% comment %} <script>
    function calculateRemainingPrice() {
        // Get values from input fields
        var totalPriceInput = document.getElementById('moneyManagementTotalRemainingAmount');
        var installmentPriceInput = document.getElementById('moneyManagementInstallmentAmount');

        // Parse input values to floats or set to 0 if not valid numbers
        var totalPrice = parseFloat(totalPriceInput.value) || 0;
        var installmentPrice = parseFloat(installmentPriceInput.value) || 0;

        // Validate input values
        if (isNaN(totalPrice) || isNaN(installmentPrice)) {
            // Handle invalid input (e.g., display an error message)
            console.error('Invalid input. Please enter valid numbers.');
            return;
        }

        // Calculate remaining price
        var remainingPrice = totalPrice - installmentPrice;

        // Update the remainingPrice field
        document.getElementById('moneyManagementRemainingPayment').value = remainingPrice.toFixed();
    }
</script> {% endcomment %}

<script>
	function calculateRemainingPrice() {
        // Get values from input fields
        var totalPriceInput = document.getElementById('moneyManagementTotalRemainingAmount');
        var installmentPriceInput = document.getElementById('moneyManagementInstallmentAmount');

        // Parse input values to floats or set to 0 if not valid numbers
        var totalPrice = parseFloat(totalPriceInput.value) || 0;
        var installmentPrice = parseFloat(installmentPriceInput.value) || 0;

        // Validate input values
        if (isNaN(totalPrice) || isNaN(installmentPrice)) {
            // Handle invalid input (e.g., display an error message)
            console.error('Invalid input. Please enter valid numbers.');
            return;
        }

        // Calculate remaining price
        var remainingPrice = totalPrice - installmentPrice;

        // Update the remainingPrice field
        document.getElementById('moneyManagementRemainingPayment').value = remainingPrice.toFixed();
    }

    // Event listener for moneyManagementTotalRemainingAmount input change
    document.getElementById('moneyManagementTotalRemainingAmount').addEventListener('input', calculateRemainingPrice);

    // Event listener for moneyManagementInstallmentAmount input change
    document.getElementById('moneyManagementInstallmentAmount').addEventListener('input', calculateRemainingPrice);
</script>

<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>


<script>
    // Function to make AJAX Request for moneyManagement_datafetch
    function fetchData(client_id) {
        $.ajax({
            type: 'GET',
            url: '/Pacifichomes-adminpanel/moneyManagement_datafetch/' + client_id + '/',
            success: function (data) {
                
                // Update HTML elements with the received data
                $('#clientBangalowNo').val(data.client_bangalow_no || '');
                $('#moneyManagementPhoneNo').val(data.client_phone_no || '');
                $('#moneyManagementTotalAmount').val(data.client_total_price || '');
                $('#moneyManagementTokenAmount').val(data.client_token_payment || '');
                $('#moneyManagementTotalRemainingAmount').val(data.client_total_remaining_amount || '');
				$('#moneyManagementInstallmentAmount').val(data.client_monthly_amount || '');
				
            },
            error: function (error) {
                console.log('Error (moneyManagement_datafetch):', error);
            }
        });
    }
    // Function to make AJAX Request for moneyManagement_tablefetch
	function fetchTableData(client_id) {
		$.ajax({
			type: 'GET',
			url: '/Pacifichomes-adminpanel/moneyManagement_tablefetch/' + client_id + '/',
			success: function (responseData) {
				

				// Update HTML elements with the received data
				$('#clientBangalowNo').val(responseData.client_bangalow_no || '');

				// Check if entries exist
				if (responseData.entries && responseData.entries.length > 0) {
					// Show the table container
					$('#moneyManagementTableContainer').show();
					// Update the table body with entry details
					var tableBody = $('#moneyManagementTableBody');
					tableBody.empty(); // Clear previous entries
					// Loop through entries and append rows to the table
					responseData.entries.forEach(function (entry) {
						var row = '<tr>' +
							
							'<td>' + entry.moneyManagement_amount_mode + '</td>' +
							'<td>' + entry.moneyManagement_total_amount + '</td>' +
							'<td>' + entry.moneyManagement_installment_amount + '</td>' +
							'<td>' + entry.moneyManagement_transition + '</td>' +
							'<td>' + entry.moneyManagement_remaining_Payment + '</td>' +
							'<td>' + entry.moneyManagement_date + '</td>' +
							'</tr>';
						tableBody.append(row);
					});
				} else {
					// No entries, hide the table container
					$('#moneyManagementTableContainer').hide();
				}
			},
			
			error: function (tableError) {
				console.log('Error (moneyManagement_tablefetch):', tableError);
			}
		});
	}

	function updateTable(entries) {
		var tableBody = $('#moneyManagementTableBody');
		tableBody.empty(); // Clear previous entries
	
		// Loop through entries and append rows to the table
		entries.forEach(function (entry) {
			var row = '<tr>' +
				
				'<td>' + entry.moneyManagement_amount_mode + '</td>' +
				'<td>' + entry.moneyManagement_total_amount + '</td>' +
				'<td>' + entry.moneyManagement_installment_amount + '</td>' +
				'<td>' + entry.moneyManagement_remaining_Payment + '</td>' +
				'<td>' + entry.moneyManagement_date + '</td>' +
				'</tr>';
			tableBody.append(row);
		});
	}
	calculateRemainingPrice();
	// Event listeners for input changes
	document.getElementById('moneyManagementTotalRemainingAmount').addEventListener('input', calculateRemainingPrice);
	document.getElementById('moneyManagementInstallmentAmount').addEventListener('input', calculateRemainingPrice);
	
// Change event handler
$(document).ready(function () {
    $('#moneyManagementBangalowNo').on('change', function () {
        var client_id = $(this).val();
        // Call the functions for each AJAX request
        fetchData(client_id);
        fetchTableData(client_id);
    });
});
// ... your existing code ...

</script>


<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script>
$(document).ready(function () {
    $('#submitBtn').click(function () {
      $(this).prop('disabled', true);

      // After your form submission logic
$.ajax({
    type: 'POST',
    url: '/path/to/moneyManagementRegisterFun/',
    data: $('#myMoneyManagementForm').serialize(),  // Assuming your form has the id 'myMoneyManagementForm'
    success: function (responseData) {
        console.log('Data (moneyManagementRegisterFun):', responseData);

        // Update the table with the received entries
        updateTable(responseData.entries);
        
        // Clear the form if needed
        $('#myMoneyManagementForm')[0].reset();
    },
    error: function (error) {
        console.log('Error (moneyManagementRegisterFun):', error);
    }
});

	function updateTable(entries) {
		var tableBody = $('#moneyManagementTableBody');
		tableBody.empty(); // Clear previous entries
	
		// Loop through entries and append rows to the table
		entries.forEach(function (entry) {
			var row = '<tr>' +
				'<td>' + entry.moneyManagement_amount_mode + '</td>' +
				'<td>' + entry.moneyManagement_total_amount + '</td>' +
				'<td>' + entry.moneyManagement_installment_amount + '</td>' +
				'<td>' + entry.moneyManagement_remaining_Payment + '</td>' +
				'<td>' + entry.moneyManagement_date + '</td>' +
				'</tr>';
			tableBody.append(row);
		});
	}
  });
</script>


{% endblock %}
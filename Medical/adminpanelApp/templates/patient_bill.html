{% extends 'Admin_base.html' %} 
{% load static %} 
{% block admin_bodyblock %}
<!--begin::Main-->
<div class="app-main flex-column flex-row-fluid" id="kt_app_main">
	<!--begin::Content wrapper-->
	<div class="d-flex flex-column flex-column-fluid">
		<!--begin::Toolbar-->
		<div id="kt_app_toolbar" class="app-toolbar py-3 py-lg-6">
			<!--begin::Toolbar container-->
			<div id="kt_app_toolbar_container" class="app-container container-xxl d-flex flex-stack">
				<!--begin::Page title-->
				<div class="page-title d-flex flex-column justify-content-center flex-wrap me-3">
					<!--begin::Title-->
					<h1 class="page-heading d-flex text-dark fw-bold fs-3 flex-column justify-content-center my-0">Patient Medicine Details Form</h1>
					<!--end::Title-->
					<!--begin::Breadcrumb-->
					<ul class="breadcrumb breadcrumb-separatorless fw-semibold fs-7 my-0 pt-1">
						<!--begin::Item-->
						<li class="breadcrumb-item text-muted">
							<a href="{% url 'dashboardPage' %}" class="text-muted text-hover-primary">Admin Side</a>
						</li>
						<!--end::Item-->
						<!--begin::Item-->
						<li class="breadcrumb-item">
							<span class="bullet bg-gray-400 w-5px h-2px"></span>
						</li>
						<!--end::Item-->
						<!--begin::Item-->
						<li class="breadcrumb-item text-muted">Medicine</li>
						<!--end::Item-->
						<!--begin::Item-->
						<li class="breadcrumb-item">
							<span class="bullet bg-gray-400 w-5px h-2px"></span>
						</li>
						<!--end::Item-->
						<!--begin::Item-->
						<li class="breadcrumb-item text-muted">Add Patient Medicine Details</li>
						<!--end::Item-->
					</ul>
					<!--end::Breadcrumb-->
				</div>
				<!--end::Page title-->
			</div>
			<!--end::Toolbar container-->
		</div>
		<!--end::Toolbar-->
		<!--begin::Content-->
		<div id="kt_app_content" class="app-content flex-column-fluid">
			{% for message in messages %}
            <div class="alert {{ message.tags }} alert-dismissible" role="alert">
                <strong>Message:</strong> {{ message }}
            </div>
            {% endfor %}
			<!--begin::Content container-->	
			<div id="kt_app_content_container" class="app-container container-xxl">
				<!--begin::Form-->
				<form action="{% url 'patientbillPage' %}" enctype="multipart/form-data" method="post" data-parsley-validate novalidate class="form d-flex flex-column flex-lg-row">{% csrf_token %}	
					
					<!--begin::Main column-->
					<div class="d-flex flex-column flex-row-fluid gap-7 gap-lg-10">
						<!--begin::Tab content-->
						<div class="tab-content">
							<!--begin::Tab pane-->
							<div class="tab-pane fade show active" id="kt_ecommerce_add_product_general" role="tab-panel">
								<div class="d-flex flex-column gap-7 gap-lg-10">
									<!--begin::Add Patient Medicine Details options-->
									<div class="card card-flush py-4">
										<!--begin::Card header-->
										<div class="card-header">
											<div class="card-title">
												<h2>Patient Medicine Details Information</h2>
											</div>
										</div>
										<!--end::Card header-->
										<!--begin::Card body-->
										<div class="card-body pt-0">
											<!-- Patient Details -->
											<div class="mb-4">
												<h3>Patient Details:</h3>
												<div class="row">
													<!-- Left column for patient name -->
													<div class="col-md-6">
														<p><strong>Name:</strong> {{ patient_detail.patientdetail_name }}</p>
													</div>
													<!-- Right column for doctor name and mobile number -->
													<div class="col-md-6">
														<p><strong>Doctor Name:</strong> {{ patient_detail.patientdetail_doctor_name }}</p>
														<p><strong>Mobile Number:</strong> {{ patient_detail.patientdetail_mobile_no }}</p>
													</div>
												</div>
											</div>

											<!-- Total Bill -->
											

											<!-- Table to display medicines -->
											<div class="table-responsive">
												<table class="table table-bordered">
													<thead>
														<tr>
															<th>Medicine Name</th>
															<th>Price</th>
															<th>Quantity</th>
															<th>Total Price</th>
															<th>Action</th>
														</tr>
													</thead>
													<tbody>
														{% for medicine in patient_medicines %}
														<tr>
															<td>{{ medicine.patientmedicine_medicine_name }}</td>
															<td>{{ medicine.patientmedicine_price }}</td>
															<td>{{ medicine.patientmedicine_quantity }}</td>
															<td>{{ medicine.patientmedicine_totalprice }}</td>
															<td>
                                                                <a href="{% url 'patientmedicineEditPage' medicine.patientmedicine_id %}" class="btn btn-sm btn-primary">
                                                                    <i class="fa fa-edit"></i>
                                                                </a>
                                                                <a href="{% url 'patientmedicineDeletePage' medicine.patientmedicine_id %}" class="btn btn-sm btn-danger">
                                                                    <i class="fa fa-trash"></i>
                                                                </a>
                                                            </td>
														</tr>
														{% endfor %}
														<tr>
															<th scope="row" colspan="3" class="border-0 text-end">Total Bill:</th>
															<td class="border-0 text-end"><h4 class="m-0 fw-semibold">{{ patientdetail_totalprice_ }}</h4></td>
														</tr>
													</tbody>
												</table>
												
												
											</div>
										</div>
										<!--end::Card body-->
									</div>
									<!--end::Contact Us options-->
								</div>
							</div>
							<!--end::Tab pane-->
							
						</div>
						<!--end::Tab content-->
						<div class="d-flex justify-content-center">
							<!--begin::Button-->
							<a href="{% url 'patientmedicineAddPage' %}" id="kt_ecommerce_add_product_cancel" class="btn btn-light me-5">Cancel</a>
							<!--end::Button-->
							<!--begin::Button-->
							<button type="submit" id="kt_ecommerce_add_product_submit" class="btn btn-primary">
								<span class="indicator-label">Submit</span>
								<span class="indicator-progress">Please wait...
								<span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>
							</button>
							
							<!--end::Button-->
						</div>
					</div>
					<!--end::Main column-->
				</form>
				<!--end::Form-->
			</div>
			<!--end::Content container-->
		</div>
		<!--end::Content-->
	</div>
	<!--end::Content wrapper-->
</div>
<!--end::Main-->


{% endblock %}

{% extends 'Admin_base.html' %} 
{% load static %} {% block admin_bodyblock %}
<!--begin::Main-->
<div class="app-main flex-column flex-row-fluid" id="kt_app_main">
	<!--begin::Content wrapper-->
	<div class="d-flex flex-column flex-column-fluid">
		<!--begin::Toolbar-->
		<div id="kt_app_toolbar" class="app-toolbar py-3 py-lg-6">
			<!--begin::Toolbar container-->
			<div id="kt_app_toolbar_container" class="app-container container-xxl d-flex flex-stack">
				<!--begin::Page title-->
				<div class="page-title d-flex flex-column justify-content-center flex-wrap me-3">
					<!--begin::Title-->
					<h1 class="page-heading d-flex text-dark fw-bold fs-3 flex-column justify-content-center my-0">Medicine Details Form</h1>
					<!--end::Title-->
					<!--begin::Breadcrumb-->
					<ul class="breadcrumb breadcrumb-separatorless fw-semibold fs-7 my-0 pt-1">
						<!--begin::Item-->
						<li class="breadcrumb-item text-muted">
							<a href="{% url 'dashboardPage' %}" class="text-muted text-hover-primary">Admin Side</a>
						</li>
						<!--end::Item-->
						<!--begin::Item-->
						<li class="breadcrumb-item">
							<span class="bullet bg-gray-400 w-5px h-2px"></span>
						</li>
						<!--end::Item-->
						<!--begin::Item-->
						<li class="breadcrumb-item text-muted">Medicine Info</li>
						<!--end::Item-->
						<!--begin::Item-->
						<li class="breadcrumb-item">
							<span class="bullet bg-gray-400 w-5px h-2px"></span>
						</li>
						<!--end::Item-->
						<!--begin::Item-->
						<li class="breadcrumb-item text-muted">Edit Medicine Details</li>
						<!--end::Item-->
					</ul>
					<!--end::Breadcrumb-->
				</div>
				<!--end::Page title-->
				
			</div>
			<!--end::Toolbar container-->
		</div>
		<!--end::Toolbar-->
		<!--begin::Content-->
		<div id="kt_app_content" class="app-content flex-column-fluid">
			{% for message in messages %}
            <div class="alert {{ message.tags }} alert-dismissible" role="alert">
                <strong>Message:</strong> {{ message }}
            </div>
            {% endfor %}
			<!--begin::Content container-->
			<div id="kt_app_content_container" class="app-container container-xxl">
				<!--begin::Form-->
				<form action="{% url 'medicineEditPage' %}" enctype="multipart/form-data" method="post" data-parsley-validate novalidate class="form d-flex flex-column flex-lg-row">
					{% csrf_token %}
					<!--begin::Main column-->
					<div class="d-flex flex-column flex-row-fluid gap-7 gap-lg-10">
						<!--begin::Tab content-->
						<div class="tab-content">
							<!--begin::Tab pane-->
							<div class="tab-pane fade show active" id="kt_ecommerce_add_product_general" role="tab-panel">
								<div class="d-flex flex-column gap-7 gap-lg-10">
									<!--begin::Add Medicine Details options-->
									<div class="card card-flush py-4">
										<!--begin::Card header-->
										<div class="card-header">
											<div class="card-title">
												<h2>Medicine Details Information</h2>
											</div>
										</div>
										<!--end::Card header-->
										<!--begin::Card body-->
										<div class="card-body pt-0">
											<!--begin::Input group-->
											<div class="mb-10 fv-row">
												<!--begin::Label-->
												<label for="medicineName" class="required form-label">Medicine Name</label>
												<!--end::Label-->
												<!--begin::Input-->
												<input type="text" id="medicineName" name="medicineName" class="form-control mb-2" placeholder="Member Position" value="{{ medicine_featch.medicine_name }}" />
												<input type="text" id="medicine_id" name="medicine_id" class="form-control mb-2" placeholder="" value="{{ medicine_featch.medicine_id }}" hidden/>
												<!--end::Input-->
												<!--begin::Description-->
												<span class="errormsgtitle" style="color:red"></span>
												<!--end::Description-->
											</div>
											<!--end::Input group-->

											<!--begin::Input group-->
											<div class="mb-10 fv-row">
												<!--begin::Label-->
												<label for="medicinePrice" class="required form-label">Medicine Price</label>
												<!--end::Label-->
												<!--begin::Input-->
												<input type="text" id="medicinePrice" name="medicinePrice" class="form-control mb-2" placeholder="Medicine Price" value="{{ medicine_featch.medicine_price }}" />
												<!--end::Input-->
												<!--begin::Description-->
												<span class="errormsgprice" style="color:red"></span>
												<!--end::Description-->
											</div>
											<!--end::Input group-->

											<!--begin::Input group-->
											<div class="mb-10 fv-row">
												<!--begin::Label-->
												<label for="medicineQuantity" class="required form-label">Medicine Quantity</label>
												<!--end::Label-->
												<!--begin::Input-->
												<input type="text" id="medicineQuantity" name="medicineQuantity" class="form-control mb-2" placeholder="Medicine Quantity" value="{{ medicine_featch.medicine_quantity }}" readonly/>
												<!--end::Input-->
												<!--begin::Description-->
												<span class="errormsgquantity" style="color:red"></span>
												<!--end::Description-->
											</div>
											<!--end::Input group-->
											<!--begin::Add Value Button-->
											<button type="button" id="addQuantityButton" class="btn btn-secondary me-5">Add Quantity</button>
											<!--end::Add Value Button-->
											<div id="newFieldContainer" class="mt-5"></div> <!-- Container for new input field -->

											<!--begin::Input group-->
											<div class="mb-10 fv-row">
												<!--begin::Label-->
												<label for="medicineRememberQuantity" class="required form-label">Medicine Remember Quantity</label>
												<!--end::Label-->
												<!--begin::Input-->
												<input type="text" id="medicineRememberQuantity" name="medicineRememberQuantity" class="form-control mb-2" placeholder="Medicine Remember Quantity" value="{{ medicine_featch.medicine_remember_quantity }}" readonly/>
												<!--end::Input-->
												<!--begin::Description-->
												<span class="errormsgquantity" style="color:red"></span>
												<!--end::Description-->
											</div>
											<!--end::Input group-->

											<!--begin::Input group-->
											<div class="mb-10 fv-row">
												<!--begin::Label-->
												<label for="medicinemg" class="required form-label">Medicine mg</label>
												<!--end::Label-->
												<!--begin::Input-->
												<input type="text" id="medicinemg" name="medicinemg" class="form-control mb-2" placeholder="Medicine mg" value="{{ medicine_featch.medicine_mg }}" />
												<!--end::Input-->
												<!--begin::Description-->
												<span class="errormsgmg" style="color:red"></span>
												<!--end::Description-->
											</div>
											<!--end::Input group-->
											<div class="d-flex">
												<!--begin::Input group-->
												<div class="mb-10 fv-row">
													<!--begin::Label-->
													<label for="medicineMfgDate" class="required form-label">Medicine Mfg Date</label>
													<!--end::Label-->
													<!--begin::Input-->
													<input type="text" id="medicineMfgDate" name="medicineMfgDate" class="form-control mb-2" placeholder="YYYY-MM-DD" value="{{ medicine_featch.medicine_mfg_date }}" />
													<!--end::Input-->
													<!--begin::Description-->
													<span class="errormsgmfgdate" style="color:red"></span>
													<!--end::Description-->
												</div>
												<!--end::Input group-->

												<!--begin::Input group-->
												<div class="mb-10 fv-row" style="margin-left: 200px;">
													<!--begin::Label-->
													<label for="medicineexpiryDate" class="required form-label">Medicine Expiry Date</label>
													<!--end::Label-->
													<!--begin::Input-->
													<input type="text" id="medicineexpiryDate" name="medicineexpiryDate" class="form-control mb-2" placeholder="YYYY-MM-DD" value="{{ medicine_featch.medicine_expiry_date }}" />
													<!--end::Input-->
													<!--begin::Description-->
													<span class="errormsgexpdate" style="color:red"></span>
													<!--end::Description-->
												</div>
												<!--end::Input group-->
											</div>
											<!--begin::Input group-->
											<div class="row mb-0">
												<!--begin::Label-->
												<label class="col-lg-4 col-form-label fw-semibold fs-6">Active or Disactive</label>
												<!--begin::Label-->
												<div class="col-lg-8 d-flex align-items-center">
													{% if medicine_featch.medicine_is_active == True %}
													<div class="form-check form-check-solid form-switch form-check-custom fv-row">
														<input class="form-check-input w-45px h-30px" type="checkbox" id="medicinedisable" checked="checked" name="medicinedisable" />
														<label class="form-check-label" for="medicinedisable">Active</label>
													</div>
													{% else %}
													<div class="form-check form-check-solid form-switch form-check-custom fv-row">
														<input class="form-check-input w-45px h-30px" type="checkbox" id="medicinedisable" name="medicinedisable" />
														<label class="form-check-label" for="medicinedisable">Disactive</label>
													</div>
													{% endif %}
												</div>
											</div>
											<!--end::Input group-->
										</div>
										<!--end::Card header-->
									</div>
									<!--end::Add Medicine Details options-->
								</div>
							</div>
							<!--end::Tab pane-->
						</div>
						<!--end::Tab content-->
						<div class="d-flex justify-content-end">
							<!--begin::Button-->
							<a href="{% url 'medicineViewPage' %}" id="kt_ecommerce_add_product_cancel" class="btn btn-light me-5">Cancel</a>
							<a href="{% url 'medicineViewPage' %}" id="kt_ecommerce_add_product_cancel" class="btn btn-light me-5">View</a>
							<!--end::Button-->
							
							<!--begin::Button-->
							<button type="submit" id="kt_ecommerce_add_product_submit" class="btn btn-primary">
								<span class="indicator-label">Save Changes</span>
								<span class="indicator-progress">Please wait...
								<span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>
							</button>
							<!--end::Button-->
						</div>
						
					</div>
					<!--end::Main column-->
				</form>
				<!--end::Form-->
			</div>
			<!--end::Content container-->
		</div>
		<!--end::Content-->
	</div>
	<!--end::Content wrapper-->
</div>
<!--end:::Main-->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

<script>
	$(document).ready(function() {
		
		$(".errormsgtitle").hide()
		$('#medicineName').on('input', function() {
			if ($(this).val().trim() === '') {
				$('#kt_ecommerce_add_product_submit').prop('disabled', true);
				$(".errormsgtitle").show();
				$(".errormsgtitle").text("Medicine Title is required");
			} else {
				$('#kt_ecommerce_add_product_submit').prop('disabled', false);
				$(".errormsgtitle").hide();

			}
		});

		$(".errormsgprice").hide()
		$('#medicinePrice').on('input', function() {
			if ($(this).val().trim() === '') {
				$('#kt_ecommerce_add_product_submit').prop('disabled', true);
				$(".errormsgprice").show();
				$(".errormsgprice").text("Medicine Title is required");
			} else {
				$('#kt_ecommerce_add_product_submit').prop('disabled', false);
				$(".errormsgprice").hide();

			}
		});

		$(".errormsgquantity").hide()
		$('#medicineQuantity').on('input', function() {
			if ($(this).val().trim() === '') {
				$('#kt_ecommerce_add_product_submit').prop('disabled', true);
				$(".errormsgquantity").show();
				$(".errormsgquantity").text("Medicine Quantity is required");
			} else {
				$('#kt_ecommerce_add_product_submit').prop('disabled', false);
				$(".errormsgquantity").hide();

			}
		});

		$(".errormsgmg").hide()
		$('#medicinemg').on('input', function() {
			if ($(this).val().trim() === '') {
				$('#kt_ecommerce_add_product_submit').prop('disabled', true);
				$(".errormsgmg").show();
				$(".errormsgmg").text("Medicine mg is required");
			} else {
				$('#kt_ecommerce_add_product_submit').prop('disabled', false);
				$(".errormsgmg").hide();

			}
		});

		$(".errormsgmfgdate").hide()
		$('#medicineMfgDate').on('input', function() {
			if ($(this).val().trim() === '') {
				$('#kt_ecommerce_add_product_submit').prop('disabled', true);
				$(".errormsgmfgdate").show();
				$(".errormsgmfgdate").text("Medicine Mfg Date is required");
			} else {
				$('#kt_ecommerce_add_product_submit').prop('disabled', false);
				$(".errormsgmfgdate").hide();

			}
		});

		$(".errormsgexpdate").hide()
		$('#medicineexpiryDate').on('input', function() {
			if ($(this).val().trim() === '') {
				$('#kt_ecommerce_add_product_submit').prop('disabled', true);
				$(".errormsgexpdate").show();
				$(".errormsgexpdate").text("Medicine expiry Date is required");
			} else {
				$('#kt_ecommerce_add_product_submit').prop('disabled', false);
				$(".errormsgexpdate").hide();

			}
		});

		// Add Quantity Button Click Event
		$('#addQuantityButton').on('click', function() {
			// Prompt the user to enter a value to add
			const additionalQuantity = parseFloat(prompt("Enter Add Quantity:")) || 0;
			// Get the current value of Medicine Remember Quantity
			const medicineRememberQuantity = parseFloat($('#medicineRememberQuantity').val()) || 0;
			// Calculate the new value by adding the additional quantity
			const newQuantity = medicineRememberQuantity + additionalQuantity;
			// Update the Medicine Remember Quantity field with the new value
			$('#medicineRememberQuantity').val(newQuantity);
			$('#medicineQuantity').val(additionalQuantity);
		});
	
	});
</script>

{% endblock %}
